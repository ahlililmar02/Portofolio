<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greenspace Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />	
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">    
    <link rel="stylesheet" href="style.css?v=125">
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
    <script>
        const cacheBuster = new Date().getTime(); 
        const scriptElement = document.createElement('script');
        scriptElement.src = 'greenspace.js?v=' + cacheBuster; 
        document.head.appendChild(scriptElement);
    </script>
</head>
<body>

    <div id="navbar">
		<div class="nav-title">Portfolio</div>

		<div class="nav-center">
            <a href="index.html">Home</a>
            <a href="map.html">Dashboard</a>
            <a href="prediction.html">Estimated PM2.5</a>
            <a href="greenspace.html">Green-space Map</a>
        </div>

		<div class="nav-right">
            <div class="profile-dropdown-container">
                <span class="material-symbols-outlined profile-icon">
                    account_circle
                </span>

                <!-- DROPDOWN -->
            <div class="profile-dropdown" id="profileDropdown">
                <a 
                    href="https://www.linkedin.com/in/ahlil-batuparan-850b6b243/" 
                    target="_blank" 
                    class="dropdown-item"
                >
                    <span class="material-symbols-outlined">work</span>
                    LinkedIn
                </a>

                <a 
                    href="https://github.com/ahlililmar02" 
                    target="_blank" 
                    class="dropdown-item"
                >
                    <span class="material-symbols-outlined">code</span>
                    GitHub
                </a>
            </div>
            </div>
            <span class="material-symbols-outlined menu-toggle">menu</span>
        </div>
    </div>

    <div id="mobile-menu" class="mobile-menu">
        <a href="index.html">Home</a>
        <a href="map.html">Dashboard</a>
        <a href="prediction.html">Estimated PM2.5</a>
        <a href="greenspace.html">Green-space Map</a>
    </div>
    <script>
        const profileIcon = document.querySelector(".profile-icon");
        const profileDropdown = document.getElementById("profileDropdown");

        profileIcon.addEventListener("click", () => {
            profileDropdown.classList.toggle("active");
            profileDropdown.style.display =
                profileDropdown.style.display === "block" ? "none" : "block";
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", (e) => {
            if (!profileIcon.contains(e.target) &&
                !profileDropdown.contains(e.target)) {
                profileDropdown.style.display = "none";
            }
        });
    </script>

    <script>
        const menuToggle = document.querySelector(".menu-toggle");
        const mobileMenu = document.getElementById("mobile-menu");

        menuToggle.addEventListener("click", () => {
            mobileMenu.classList.toggle("active");
        });
    </script>
    <script>
        const links = document.querySelectorAll('.nav-center a');
        const currentPage = window.location.pathname.split("/").pop(); // get file name

        links.forEach(link => {
            if (link.getAttribute('href') === currentPage || 
                (currentPage === '' && link.getAttribute('href') === 'index.html')) {
                link.classList.add('active');
            }
        });
    </script>
    <div class="map-container">
    
        <div id="map" class="map-full-view"></div>

        <div id="overview-card" class="info-card">
            <div class="image-container">
                <img id="overview-image" src="" alt="" class="city-image">
            </div>
            <div class="content-container">
                <h3 id="overview-name" class="city-name-header">Jakarta</h3>
                <p id="overview-desc" class="city-description-text"></p>
                <div class="chart-wrap">
                    <canvas id="overview-chart" class="chart-canvas"></canvas>
                </div>
            </div>
        </div>

        <div id="info-card" class="info-card hidden">
            <button id="close-button" class="close-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>

            <div class="image-container">
                <img id="city-image" src="" alt="" class="city-image">
            </div>

            <div class="content-container">
                <h3 id="city-name" class="city-name-header"></h3>
                <p id="city-description" class="city-description-text"></p>
                <div class="chart-wrap">
                    <canvas id="city-chart" class="chart-canvas"></canvas>
                </div>
            </div>
        </div>
        <!-- Priority Button Panel -->
        <div id="priorityPanel"
            style="
                position: absolute;
                bottom: 70px;
                left: 20px;
                z-index: 1000;
                background: white;
                padding: 12px;
                border-radius: 10px;
                box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            ">
            
            <div style="display: flex; gap: 6px;">
                <h5>Display Priority</h5>
                <button data-priority="all" class="priority-btn priority-active">All</button>
                <button data-priority="low" class="priority-btn">Low</button>
                <button data-priority="medium" class="priority-btn">Medium</button>
                <button data-priority="high" class="priority-btn">High</button>
            </div>

        </div>


    </div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script src="config.js"></script>

</body>
</html>