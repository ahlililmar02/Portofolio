<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>PM2.5 Prediction Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&family=Material+Symbols+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css?v=125">
	<script src="https://unpkg.com/geotiff"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shapefile/0.6.6/shp.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-trendline@1.1.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@1.3.0/dist/chartjs-chart-matrix.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
	<script>
        // Get the current timestamp (milliseconds since epoch)
        const cacheBuster = new Date().getTime(); 
        const scriptElement = document.createElement('script');
        // Append the timestamp as a query parameter (e.g., map.js?v=1700000000000)
        scriptElement.src = 'script.js?v=' + cacheBuster; 
        document.head.appendChild(scriptElement);
    </script>
</head>
<body class="bg-gray-50">
    <div id="navbar">
		<div class="nav-title">Portfolio</div>

		<div class="nav-center">
            <a href="index.html">Home</a>
            <a href="map.html">Dashboard</a>
            <a href="prediction.html">Estimated PM2.5</a>
            <a href="greenspace.html">Green-space Map</a>
        </div>

		<div class="nav-right">
            <div class="profile-dropdown-container">
                <span class="material-symbols-outlined profile-icon">
                    account_circle
                </span>

                <!-- DROPDOWN -->
            <div class="profile-dropdown" id="profileDropdown">
                <a 
                    href="https://linkedin.com" 
                    target="_blank" 
                    class="dropdown-item"
                >
                    <span class="material-symbols-outlined">work</span>
                    LinkedIn
                </a>

                <a 
                    href="https://github.com" 
                    target="_blank" 
                    class="dropdown-item"
                >
                    <span class="material-symbols-outlined">code</span>
                    GitHub
                </a>
            </div>
            </div>
            <span class="material-symbols-outlined menu-toggle">menu</span>
        </div>
    </div>

    <div id="mobile-menu" class="mobile-menu">
        <a href="index.html">Home</a>
        <a href="map.html">Dashboard</a>
        <a href="prediction.html">Estimated PM2.5</a>
        <a href="greenspace.html">Green-space Map</a>
    </div>
    <script>
        const profileIcon = document.querySelector(".profile-icon");
        const profileDropdown = document.getElementById("profileDropdown");

        profileIcon.addEventListener("click", () => {
            profileDropdown.classList.toggle("active");
            profileDropdown.style.display =
                profileDropdown.style.display === "block" ? "none" : "block";
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", (e) => {
            if (!profileIcon.contains(e.target) &&
                !profileDropdown.contains(e.target)) {
                profileDropdown.style.display = "none";
            }
        });
    </script>

    <script>
        const menuToggle = document.querySelector(".menu-toggle");
        const mobileMenu = document.getElementById("mobile-menu");

        menuToggle.addEventListener("click", () => {
            mobileMenu.classList.toggle("active");
        });
    </script>
    <script>
        const links = document.querySelectorAll('.nav-center a');
        const currentPage = window.location.pathname.split("/").pop(); // get file name

        links.forEach(link => {
            if (link.getAttribute('href') === currentPage || 
                (currentPage === '' && link.getAttribute('href') === 'index.html')) {
                link.classList.add('active');
            }
        });
    </script>
    <div class="pm25-prediction-container">
        
        <div class="hero-section">
            <div class="hero-image-fallback">
                <img 
                    src="https://images.unsplash.com/photo-1751953813464-06a989a71c3a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxqYWthcnRhJTIwcG9sbHV0aW9uJTIwc2t5bGluZXxlbnwxfHx8fDE3NjQ0ODQ3NzN8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"
                    alt="Jakarta pollution"
                    class="hero-image"
                />
            </div>
            
            <div class="hero-overlay"></div>
            
            <div class="hero-content">
                <div class="content-wrapper">
                    <div class="text-block">
                        <h1>PM2.5 1x1 km Map Prediction in Jakarta</h1>
                        <p>
                            One of the fine airborne pollutant is <strong>PM2.5</strong> with a diameter less than 2.5 µm, means they <strong>efficiently penetrate the human respiratory system</strong>. 
                            Despite continuous PM2.5 monitoring by government and international agencies, <strong>Jakarta's unevenly distributed stations</strong> limit spatially consistent mapping of PM2.5. 
                            Several studies have utilized machine learning models such as <strong>Random Forest (RF), XGBoost, and LightGBM</strong> to predict PM2.5 concentrations.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="selectors-bar">
            <div class="content-wrapper">
                <div class="selectors-flex">
                    <div class="selector-group">
                        <label>Select Model:</label>
                        <select id="model-select" class="custom-select">
                            <option>Random Forest (RF)</option>
                            <option>XGBoost</option>
                            <option>LightGBM</option>
                        </select>
                    </div>
                    <div class="selector-group">
						<label>Select Date:</label>
						<div class="date-selector-flex">
							<input 
								type="date" 
								id="date-input"
								class="custom-input date-input-field date-input-disabled"
								value="2024-11-30"
								disabled
							/>
							
							<label for="all-dates-checkbox" class="checkbox-label">
								<input 
									type="checkbox" 
									id="all-dates-checkbox"
									class="custom-checkbox"
									checked
								/>
								<span class="text-gray-700 text-sm">All Date</span>
							</label>
						</div>
					</div>
                    <button class="update-btn">
                        Update Prediction
                    </button>
                </div>
            </div>
        </div>

        <div class="visualizations-section">
            <div class="content-wrapper">
                <div class="viz-grid">
                    
                    <div class="heatmap-card">
                        <h3 class="card-title">PM2.5 Concentration Heatmap</h3>
                        <div id="heatmap" class="map-placeholder">
                            <div class="text-center text-gray-400">
                                <p>Heatmap Visualization</p>
                                <p class="text-sm">(Jakarta 1x1 km Grid)</p>
                            </div>
                        </div>
                        
                        <div class="legend-bar">
                            <span class="legend-label">PM2.5 (µg/m³):</span>
                            <div class="legend-gradient"></div>
                            <div class="legend-values">
                                <span>0</span>
                                <span>50</span>
                                <span>100</span>
                                <span>150+</span>
                            </div>
                        </div>
                    </div>

                    <div class="chart-card">
                        <h3 class="card-title">Temporal Trends</h3>
                        <div class="chart-placeholder">
                            <canvas id="scatterChart"></canvas>
                        </div>
						<div class="metrics-cards-container">
                            <div class="metric-card">
                                <div class="metric-label">Mean Absolute Error</div>
                                <div class="metric-value">8.3 µg/m³</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">R²</div>
                                <div class="metric-value">0.942</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Bias</div>
                                <div class="metric-value">-1.2 µg/m³</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="analysis-section">
            <div class="content-wrapper">
                <h2 class="section-title">Analysis & Insights</h2>
                
                <div class="analysis-summary" id="analysis-summary">
                    <h3 class="summary-title">Prediction Summary</h3>
                    <div class="summary-text-block">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
</body>
</html>

